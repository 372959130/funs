define(["app","template","smExtend"],function(e,o,t){var n={};n.init=function(){e.setPageTitle("主页"),$(".homeBanner>.swiper-container").swiper({pagination:".swiper-pagination",paginationClickable:!0,autoplay:1e3,autoplayDisableOnInteraction:!1})};var i=!1;$(document).off("refresh","#home #myRefresh").on("refresh","#home #myRefresh",function(e){setTimeout(function(){$.ajax({url:"../../../json/goodlist.json",type:"GET",success:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.list.slice(0,4),n=o("goodlist_TPL",t);$("#goodList").html(n)},complete:function(){$.pullToRefreshDone(".pull-to-refresh-content"),i&&$.attachInfiniteScroll($("#myRefresh"))}})},600)}),$.pullToRefreshTrigger(".pull-to-refresh-content");var s=!1,r=0,l=2,a=0;return $(document).off("infinite","#home #myRefresh").on("infinite","#home #myRefresh",function(){s||($(".infinite-scroll-preloader").show(),s=!0,setTimeout(function(){$.ajax({url:"../../../json/goodlist.json",type:"GET",beforeSend:function(){a=$("#goodList").find(".goodsItem").length},success:function(e){r=e.list.length;var t=e.list.slice(a,a+l);if(a>=r)return $.toast("没有更多商品咯~"),$.detachInfiniteScroll($("#myRefresh")),i=!0,void $(".infinite-scroll-preloader").hide();var n=o("goodlist_TPL",t);$("#goodList").append(n),a=$("#goodList").find(".goodsItem").length},complete:function(){s=!1,$(".infinite-scroll-preloader").hide()}})},600))}),$(document).off("click","#home .goodsItem").on("click","#home .goodsItem",function(){var e=$(this).data("goodid");$.router.load("../goodsDetail/goodsDetail.html?goodid="+e,!0)}),n});