define(["zepto"],function(e){var t={};return t.include=function(e){for(var t="string"==typeof e?[e]:e,r=0;r<t.length;r++){var n=t[r].replace(/^\s|\s$/g,""),a=n.split("."),i=a[a.length-1].toLowerCase(),s="css"==i;if(s){var o=document.createElement("link","pageCSS");o.type="text/css",o.rel="stylesheet",o.href=t[r],document.getElementsByTagName("head")[0].appendChild(o)}else{var u=document.createElement("script","pageJS");u.type="text/javascript",u.src=t[r],document.getElementsByTagName("head")[0].appendChild(u)}}},t.getRequest=function(){var e=location.search,t=new Object;if(e.indexOf("?")!=-1){var r=e.substr(1);strs=r.split("&");for(var n=0;n<strs.length;n++)t[strs[n].split("=")[0]]=strs[n].split("=")[1]}return t},t.setPageTitle=function(t){t&&(document.title=t,e.device.isWeixin&&e.device.ios&&e('<iframe src="/favicon.ico"></iframe>').on("load",function(){setTimeout(function(){e(this).off("load").remove()}.bind(this),0)}).appendTo(document.body))},t.goPage=function(t,r,n){if("object"==typeof r){var a=JSON.stringify(r);sessionStorage.setItem("params",a)}e.router.load(t,n)},t.getPageParams=function(){var e=sessionStorage.getItem("params");return null!=e?JSON.parse(e):{}},t.format_money=function(e,t,r){var n="";parseFloat(e)<0&&(n="-"),e=Math.abs(parseFloat(e)).toString(),isNaN(r)&&(r=0),r=parseInt(r);var a=e.split(".");for(isNaN(a[1])&&(a[1]="0");a[1].length<r;)a[1]=a[1]+"0";if(t){for(var i=0;i<Math.floor((a[0].length-(1+i))/3);i++)a[0]=a[0].substring(0,a[0].length-(4*i+3))+","+a[0].substring(a[0].length-(4*i+3));return 0==r?n+a[0]:n+a[0]+"."+a[1].substring(0,r)}return 0==r?n+a[0]:n+a[0]+"."+a[1].substring(0,r)},t.changeMoneyMode2=function(e){for(var t=e,r="",n=0;n<t.length;n++)","!=t[n]&&(r+=t.substring(n,n+1));return r},t.protectMobileNo=function(e){var t=e.substring(0,3),r="****",n=e.substring(e.length-4,e.length);return t+r+n},t.only_number=function(e){e.value=e.value.replace(/[^0-9]/g,"")},t.letter_number=function(e){e.value=e.value.replace(/[^0-9a-zA-Z]/g,"")},t.number_point=function(e){e.value=function(e){return e.length>1?e.shift().replace(/\D/g,"")+"."+e.join("").replace(/\D/g,"").slice(0,2):e[0].replace(/\D/g,"")}(e.value.split(/\./))},t.month_length=function(e,t){return 2==t?e%4!=0?28:e%100==0&&e%400!=0?28:29:4==t||6==t||9==t||11==t?30:31},t.checkcard=function(e){var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};return isCardNo=function(e){var t=/(^\d{15}$)|(^\d{17}(\d|X)$)/;return t.test(e)!==!1},checkProvince=function(e){var r=e.substr(0,2);return void 0!=t[r]},checkBirthday=function(e){var t=e.length;if("15"==t){var r=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/,n=e.match(r),a=n[2],i=n[3],s=n[4],o=new Date("19"+a+"/"+i+"/"+s);return verifyBirthday("19"+a,i,s,o)}if("18"==t){var u=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,n=e.match(u),a=n[2],i=n[3],s=n[4],o=new Date(a+"/"+i+"/"+s);return verifyBirthday(a,i,s,o)}return!1},verifyBirthday=function(e,t,r,n){var a=new Date,i=a.getFullYear();if(n.getFullYear()==e&&n.getMonth()+1==t&&n.getDate()==r){var s=i-e;return s<60||"false60"}return!1},checkParity=function(e){e=changeFivteenToEighteen(e);var t=e.length;if("18"==t){var r,n,a=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),i=new Array("1","0","X","9","8","7","6","5","4","3","2"),s=0;for(r=0;r<17;r++)s+=e.substr(r,1)*a[r];return n=i[s%11],n==e.substr(17,1)}return!1},changeFivteenToEighteen=function(e){if("15"==e.length){var t,r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),n=new Array("1","0","X","9","8","7","6","5","4","3","2"),a=0;for(e=e.substr(0,6)+"19"+e.substr(6,e.length-6),t=0;t<17;t++)a+=e.substr(t,1)*r[t];return e+=n[a%11]}return e},isCardNo(e)===!1?(alert("您输入的身份证号码不正确，请重新输入"),!1):checkProvince(e)===!1?(alert("您输入的身份证号码不正确,请重新输入"),!1):"false60"==checkBirthday(e)?(alert("您的年龄已超龄，抱歉！"),!1):checkBirthday(e)===!1?(alert("您输入的身份证号码生日不正确,请重新输入"),!1):checkParity(e)!==!1||(alert("您的身份证校验位不正确,请重新输入"),!1)},t});